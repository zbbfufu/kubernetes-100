# Lab 1

In the first lab, we have to:
* inspect cluster nodes
* create a new pod
* check logs of a pod
* open shell in a pod

## Inspect cluster nodes

To list all the nodes we can do:
```shell
kubectl get nodes
```

If we want more information about a specific node we can:
```shell
kubectl describe nodes *node_name*
```

We can also filter from a specific field of a resource:
```shell
kubectl get nodes -o jsonpath='{range .items[*]}{.status.addresses[?(@.type=="ExternalIP")].address}{"\n"}'
```

## Create a new pod

Imperative way (only in Kubernetes `1.18`):
```shell
kubectl run www --image=nginx
```

Declarative way:
```shell
kubectl create -f www.yaml
```

You can check the actual state of the pod with:
```shell
kubectl get pods www
```

Also, it is possible to see the `yaml` generated by the cluster:
```shell
kubectl get pods www -o yaml
```

## Check Logs of a pod

```shell
kubectl logs [-f] www
```

`-f` is to attach stdin to stdout of the pod.

We can also port forward to access deployed `nginx`
```shell
kubectl port-forward www 8080:80
```

and then in a new shell:
```shell
curl 127.0.0.1:8080
```

## Open shell in a pod

If we want to open a shell in a pod, do:
```shell
kubectl exec www --stdin --tty -c nginx -- /bin/sh
```

Congrats :)
